Комплексна задача за упражнение, която се е падала на контролна по СДП.

Задача:
Да се напише програма, която се грижи за правостоящите пътници във влака от София до Горна Оряховица към частна железница. Всички правостоящи се намират на пътеката (между купетата и прозорците) във вагоните. Пътеката е толкова тясна, че между купето и прозорците има място само за един човек. По тази линия вагоните във влаковете винаги са толкова пълни, че хората не могат да се разминават по какъвто и да било начин във вътрешността им.
В ЖП депото са налични вагони с една врата, в единия край на вагона, и такива с две врати, които са разположени във двата края. Едната от двете врати се използва само за вход, а другата само за изход. Влаковите композиции се състоят от точно две подкомпозиции, всяка съдържаща вагони само от единия или само от другия вид. Всеки вагон може да събере различен брой правостоящи пътници.
а) Да се дефинира клас Train, подходящо характеризиращ пътниците във влакова композиция. За всеки пътник в системата се записва информация за пол (F/M) и възраст.
б) Да се напише функция, която преразпределя хората в един влак, така че да не останат два съседни вагона с разлика в броя на хората по-голяма от 1.
в) Да се напише функция, която реализира прекачване на хората на дадена гара, като ги нарежда в нов влак, така че мъже и жени да се редуват, и условие б) остава в сила. Ако има по-голям брой хора от даден пол, те да се наредят накрая (позволено е използването на буфер само под формата на един стек).
г) Да се изведат номерата на вагоните, сортирани по средната възраст на пътниците в тях.
Бонус: сложността на алгоритъма да бъде по-добра от O(n2).